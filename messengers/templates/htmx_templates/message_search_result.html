{% load filters %}
{% load humanize %}
{% load static %}


<ul class="message_list">
    {% for msg in message_s %}
    {% if msg.sender == user %}


    <li>
        <div class="message">
            {% if msg.grp_receiver %}

            {% if msg.grp_receiver.prof_pics %}
            <a id="prof" href="{{msg.grp_receiver.prof_pics.url}}">
                <img src="{{msg.grp_receiver.prof_pics.url}}" alt="Profile">
            </a>
            {% else %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                <!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                <path
                    d="M72 88a56 56 0 1 1 112 0A56 56 0 1 1 72 88zM64 245.7C54 256.9 48 271.8 48 288s6 31.1 16 42.3V245.7zm144.4-49.3C178.7 222.7 160 261.2 160 304c0 34.3 12 65.8 32 90.5V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V389.2C26.2 371.2 0 332.7 0 288c0-61.9 50.1-112 112-112h32c24 0 46.2 7.5 64.4 20.3zM448 416V394.5c20-24.7 32-56.2 32-90.5c0-42.8-18.7-81.3-48.4-107.7C449.8 183.5 472 176 496 176h32c61.9 0 112 50.1 112 112c0 44.7-26.2 83.2-64 101.2V416c0 17.7-14.3 32-32 32H480c-17.7 0-32-14.3-32-32zm8-328a56 56 0 1 1 112 0A56 56 0 1 1 456 88zM576 245.7v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM320 32a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM240 304c0 16.2 6 31 16 42.3V261.7c-10 11.3-16 26.1-16 42.3zm144-42.3v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM448 304c0 44.7-26.2 83.2-64 101.2V448c0 17.7-14.3 32-32 32H288c-17.7 0-32-14.3-32-32V405.2c-37.8-18-64-56.5-64-101.2c0-61.9 50.1-112 112-112h32c61.9 0 112 50.1 112 112z" />
            </svg>
            {% endif %}
            <a href="{% url 'messengers:view_messages' msg.grp_receiver.id 'Group' %}#{{msg.id}}">
                <section>{{msg.grp_receiver.name}}</section>
                <p>
                    <strong></strong>
                </p>
                <div class="time">
                    <p id="svgs">
                        You: {{msg.text|truncatechars:30}}
                    </p>
                    <section>
                        <p><strong>{{msg.date_sent|naturalday:'d/m/y'|default:""}}</strong>
                        </p>
                        <p><strong>{{msg.date_sent|date:'P'|default:""}}</strong></p>
                    </section>
                </div>
            </a>

            {% else %}

            {% if msg.receiver.info.prof_pics %}
            <a id="prof" href="{{msg.receiver.info.prof_pics.url}}">
                <img src="{{msg.receiver.info.prof_pics.url}}" alt="Profile">
            </a>
            {% else %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                <!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                <path
                    d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z" />
            </svg>
            {% endif %}
            <a href="{% url 'messengers:view_messages' msg.receiver.id 'User' %}#{{msg.id}}">
                <section>{{msg.receiver.username}}</section>
                <div class="time">
                    <p id="svgs">
                        You: {{msg.text|truncatechars:30}}
                    </p>
                    <section>
                        <p><strong>{{msg.date_sent|naturalday:'d/m/y'|default:""}}</strong>
                        </p>
                        <p><strong>{{msg.date_sent|date:'P'|default:""}}</strong></p>
                    </section>
                </div>
            </a>

            {% endif %}
        </div>
    </li>


    {% else %}


    <li>
        <div class="message">
            {% if msg.grp_receiver %}

            {% if msg.grp_receiver.prof_pics %}
            <a id="prof" href="{{msg.grp_receiver.prof_pics.url}}">
                <img src="{{msg.grp_receiver.prof_pics.url}}" alt="Profile">
            </a>
            {% else %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                <!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                <path
                    d="M72 88a56 56 0 1 1 112 0A56 56 0 1 1 72 88zM64 245.7C54 256.9 48 271.8 48 288s6 31.1 16 42.3V245.7zm144.4-49.3C178.7 222.7 160 261.2 160 304c0 34.3 12 65.8 32 90.5V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V389.2C26.2 371.2 0 332.7 0 288c0-61.9 50.1-112 112-112h32c24 0 46.2 7.5 64.4 20.3zM448 416V394.5c20-24.7 32-56.2 32-90.5c0-42.8-18.7-81.3-48.4-107.7C449.8 183.5 472 176 496 176h32c61.9 0 112 50.1 112 112c0 44.7-26.2 83.2-64 101.2V416c0 17.7-14.3 32-32 32H480c-17.7 0-32-14.3-32-32zm8-328a56 56 0 1 1 112 0A56 56 0 1 1 456 88zM576 245.7v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM320 32a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM240 304c0 16.2 6 31 16 42.3V261.7c-10 11.3-16 26.1-16 42.3zm144-42.3v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM448 304c0 44.7-26.2 83.2-64 101.2V448c0 17.7-14.3 32-32 32H288c-17.7 0-32-14.3-32-32V405.2c-37.8-18-64-56.5-64-101.2c0-61.9 50.1-112 112-112h32c61.9 0 112 50.1 112 112z" />
            </svg>
            {% endif %}
            <a href="{% url 'messengers:view_messages' msg.grp_receiver.id 'Group' %}#{{msg.id}}">
                <section>{{msg.grp_receiver.name}}</section>
                <div class="time">
                    <p id="svgs">
                        {{msg.sender.username}}: {{msg.text|truncatechars:30}}
                    </p>
                    <section>
                        <p><strong>{{msg.date_sent|naturalday:'d/m/y'|default:""}}</strong>
                        </p>
                        <p><strong>{{msg.date_sent|date:'P'|default:""}}</strong></p>
                    </section>
                </div>
            </a>

            {% else %}

            {% if msg.sender.info.prof_pics %}
            <a id="prof" href="{{msg.sender.info.prof_pics.url}}">
                <img src="{{msg.sender.info.prof_pics.url}}" alt="Profile">
            </a>
            {% else %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                <!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                <path
                    d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z" />
            </svg>
            {% endif %}
            <a href="{% url 'messengers:view_messages' msg.sender.id 'User' %}#{{msg.id}}">
                <section>{{msg.sender.username}}</section>

                <div class="time">
                    <p id="svgs">
                        {{msg.text|truncatechars:30}}
                    </p>
                    <section>
                        <p><strong>{{msg.date_sent|naturalday:'d/m/y'|default:""}}</strong></p>
                        <p><strong>{{msg.date_sent|date:'P'|default:""}}</strong></p>
                    </section>
                </div>
            </a>
            {% endif %}
        </div>
    </li>

    {% endif %}
    {% empty %}
    <section class="no_cont">
        Message not found
    </section>
    {% endfor %}
</ul>